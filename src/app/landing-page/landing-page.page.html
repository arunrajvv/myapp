<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title size="large">Welcome</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-grid>
    <ion-row>
      <ion-col size="10">
        <div id="map"></div>
        <ion-list>
          <ion-item>
            <ion-input placeholder="Name, Category, or Places" label="Search Places" labelPlacement="floating" [(ngModel)]="searchTerm"  [clearInput]="true" (keydown.enter)="searchplaces($any($event.target).value)"></ion-input>            
          </ion-item>     
        </ion-list> 
      </ion-col>
      <ion-col size="2">
        <ion-button size="medium" (click)="searchplaces(searchTerm)" class="searchBtn">
          <ion-icon slot="start" class="center" name="search"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="searched && !showLoader && results">
      <ion-card *ngFor="let place of results" class="placeCard">
        <ion-card-header>
          <ion-card-title>{{place.name}}</ion-card-title>
          <ion-card-subtitle>{{place.vicinity}}</ion-card-subtitle>
          <p><span class="ratingLabel">Rating</span> : <span class="ratingLabel">{{place.rating}}</span> ({{place.user_ratings_total}} user reviews)</p>
          <div class="cardBottom">
            <div>
              <ng-container *ngIf="place.opening_hours !== undefined">
                <ion-chip *ngIf="place.opening_hours && place.opening_hours.open_now" color="success">Opens now</ion-chip>
                <ion-chip *ngIf="!place.opening_hours.open_now" color="danger">Closed now</ion-chip>
              </ng-container>
            </div>
            <div class="navigateBtnOuter">
              <ion-button size="medium"  (click)="navigateToLocation(place)">
                <ion-icon slot="start" class="center" name="navigate-outline"></ion-icon>
              </ion-button>
            </div>
          </div>
        </ion-card-header>      
      </ion-card>
    </ion-row>
    <div *ngIf="!searched && !showLoader" class="imageCont">
      <img src="../../assets/map.png">
    </div>
    <div *ngIf="searched && !showLoader && (!results || (results && results.length == 0))" class="imageCont">
      <img src="../../assets/nodata.png">
    </div>
  </ion-grid>
  <ion-spinner name="circles" class="loader" *ngIf="showLoader" color="primary"></ion-spinner>

</ion-content>
